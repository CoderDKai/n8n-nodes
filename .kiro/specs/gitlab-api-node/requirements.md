# 需求文档

## 介绍

GitLab API节点是一个n8n社区节点，旨在通过GitLab REST API与GitLab实例进行交互。该节点将专注于核心功能：获取项目信息和合并请求管理，为自动化DevOps工作流提供基础的GitLab集成能力。

## 需求

### 需求 1 - 认证和连接配置（最高优先级）

**用户故事：** 作为一个n8n用户，我希望能够安全地连接到GitLab实例，以便使用GitLab API功能。

#### 验收标准

1. 当用户配置凭据时，系统应该支持个人访问令牌(Personal Access Token)认证
2. 当用户添加节点时，系统应该提供清晰的GitLab实例URL配置选项
3. 当用户测试连接时，系统应该能够验证GitLab实例的可访问性和认证有效性
4. 当配置无效时，系统应该提供具体的错误信息和修复建议
5. 当API调用失败时，系统应该提供清晰的错误信息和状态码
6. 当令牌过期或无效时，系统应该返回适当的认证错误信息

### 需求 2 - 项目信息获取

**用户故事：** 作为一个DevOps工程师，我希望能够获取GitLab项目的详细信息，以便在自动化工作流中使用项目数据。

#### 验收标准

1. 当用户选择"获取项目"操作时，系统应该能够通过项目ID或项目路径获取项目详细信息
2. 当API调用成功时，系统应该返回包含项目名称、描述、URL、创建时间、最后活动时间等完整项目信息
3. 当提供的项目ID不存在时，系统应该返回适当的错误信息
4. 当用户没有访问权限时，系统应该返回权限错误信息

### 需求 3 - 合并请求列表获取

**用户故事：** 作为一个代码审查者，我希望能够获取合并请求列表，以便在自动化工作流中批量处理合并请求。

#### 验收标准

1. 当用户选择"获取合并请求列表"操作时，系统应该能够获取指定项目的合并请求列表
2. 当API调用成功时，系统应该返回包含合并请求ID、标题、状态、作者、创建时间等基本信息的列表
3. 当用户提供筛选条件时，系统应该能够根据状态（opened、closed、merged）筛选合并请求
4. 当项目不存在或无权限访问时，系统应该返回适当的错误信息

### 需求 4 - 合并请求详情获取

**用户故事：** 作为一个代码审查者，我希望能够获取单个合并请求的详细信息，以便在自动化工作流中处理具体的合并请求。

#### 验收标准

1. 当用户选择"获取合并请求详情"操作时，系统应该能够通过合并请求ID获取详细信息
2. 当API调用成功时，系统应该返回包含标题、描述、状态、源分支、目标分支、作者、审查者、标签等完整信息
3. 当合并请求ID不存在时，系统应该返回适当的错误信息
4. 当用户没有访问权限时，系统应该返回权限错误信息